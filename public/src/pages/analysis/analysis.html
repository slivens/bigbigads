<div id="ad-analysis" class="ad-analysis container alert ">
    <div class="ads-font-20 analysis-title row">Advertisement Overview:</div>
    <div class="analy-overview row">
        <div class="overview-body">
            <div class="col-sm-6 analy-adscard">
                <div class="adscard-body col-xs-12 col-md-9">
                    <div class="adscard-header">
                        <a ng-href="//www.facebook.com/{{card.adser_username}}" target="_blank">
                            <img src="{{settings.imgRemoteBase[0] + card.small_photo}}" alt="" class="card-adserhead">
                        </a>
                        <div class="card-adsername-div">
                            <p class="ads-font-16 ads-weight-bold ads-text-ellipsis card-adsername">
                                <a class="" ui-sref="adser({name:card.adser_name, adser:card.adser_username})" target="_blank">
                                    <span ng-bind-html="card.adser_name | toHtml" ng-show="card.adser_name"></span>
                                    <span ng-show="!card.adser_name">{{card.adser_username}}</span>
                                </a>
                            </p>
                            <p class="card-time ads-font-14">
                                Sponsored
                            </p>
                        </div>
                    </div>
                    <div class="adscard-card">
                        <single-image ng-if="card.type == 'SingleImage'" card="card">
                        </single-image>
                        <single-video ng-if="card.type == 'SingleVideo'" card="card"></single-video>
                        <carousel ng-if="card.type == 'Carousel'" card="card">
                        </carousel>
                        <adcanvas ng-if="card.type == 'Canvas'" card="card"></adcanvas>
                    </div>
                    <div class="adscard-footer" ng-if="card.show_way != 4">
                        <i class="analy-fbicon icon-good"></i>
                        <i class="analy-fbicon icon-love"></i>
                        <i class="analy-fbicon icon-surp"></i>
                        <span ng-if="card.likes" class="ads-font-14 adscard-likedata">{{card.likes | addUnit}}</span>
                        <span class="text-right adscard-comments ads-font-14">
                            <span class="comments-text" >{{card.comments | addUnit}}&nbsp;Comments</span>
                        <span class="comments-text">{{card.shares | addUnit}}&nbsp;Shares</span>
                        <span class="comments-text">{{card.views | addUnit}}&nbsp;Views</span>
                        </span>
                    </div>
                    <br>
                </div>
            </div>
            <!-- <div class="col-sm-6 analy-info ads-font-16"  ng-class="{'info-position' : infoPosition, 'info-fixed': !infoPosition}"> -->
            <div class="col-sm-6 analy-info ads-font-16">
                <div class="analy-info-wrapper ">
                    <p class="info-list">
                        <span class="info-list-name">Time:</span>
                        <span class="info-list-value" ng-if="card.first_see && card.last_see">{{card.first_see}}~{{card.last_see}}</span>
                        <span class="info-list-err text-danger" ng-if="!card.first_see || !card.last_see">Not Enough Data</span>
                    </p>

                    <p class="info-list">
                        <span class="info-list-name">Ad placement: </span>
                        <span class="info-list-value" ng-if="card.show_way">{{card.show_way | adsTypes}}</span>
                        <span class="info-list-err text-danger" ng-if="!card.show_way">Not Enough Data</span>
                    </p>
                    <p class="info-list">
                        <span class="info-list-name">
                            Objective
                            <span class="ads-label-beta">BETA</span>:
                        </span>
                        <span ng-if="card.objective" class="info-list-value">
                            <i class="fb-oj-icon oj-{{card.objective}} ads-obje-icon"></i>
                            <span class="">{{card.objectStr[card.objective]}}</span>
                        </span>
                        <span ng-if="!card.objective" class="text-danger info-list-err">
                            Not Enough Data
                            <a ng-href="../extension" target="_blank" class="extension-link"> <i class="fa fa-download analy-down-icon"></i> BIGBIGADS Extension</a>
                        </span>
                    </p>
                    <p class="info-list info-but" ng-if="card.show_way != 4">
                        <a ng-href="{{ id.length == 32 ? ('//www.facebook.com/' + card.adser_username) : '//www.facebook.com/' + card.adser_username + '/posts/' + id }}"  class="btn btn-primary" target="_blank">See Original Post</a>
                    </p>
                    <!-- <p>
                        <span class="ads-weight-bold">Landing page:</span>
                        <a href="{{card.dest_site}}" class="btn btn-primary" ng-if="card.dest_site">Link</a>
                        <span class="text-danger" ng-if="!card.dest_site">Not Enough Data
                        <a href="" ><i class="glyphicon glyphicon-download"></i> BIGBIGADS Extension</a></span></p> -->
                    <!-- <p><a ng-href="plans">Upgrade your account to see all ads of this advertiser</a></p> -->
                </div>
            </div>
        </div>
        <div class="overview-body-bottom col-sm-6">
            <div class="info-rate">
                <div class="rate-wrapper">
                    <p>
                        <span class="ads-weight-bold">Frequency:</span>
                        <span ng-if="card.frequency">{{card.frequency}}</span>
                        <span class="text-danger" ng-if="!card.frequency">Not Enough Data</span>
                    </p>
                    <p>
                        <span class="ads-weight-bold">Share Rate:</span>
                        <span ng-if="card.share_rate">
                            <!-- <i class="fa fa-long-arrow-up analy-trend-up" ng-if="card.share_rate > 0"></i>
                            <i class="fa fa-long-arrow-down analy-trend-down" ng-if="card.share_rate < 0"></i> -->
                            {{(card.share_rate * 100).toFixed(2)}}%</span>
                        <span class="text-danger" ng-if="!card.share_rate">Not Enough Data</span>
                    </p>
                </div>
                <div class="rate-wrapper">
                    <p>
                        <span class="ads-weight-bold">Reach:</span>
                        <span ng-if="card.reach">{{card.reach | adsCount}}</span>
                        <span class="text-danger" ng-if="!card.reach">Not Enough Data</span>
                    </p>
                    <p>
                        <span class="ads-weight-bold">Like Rate:</span>
                        <span ng-if="card.like_rate">
                                <!-- <i class="fa fa-long-arrow-up analy-trend-up" ng-if="card.like_rate > 0"></i>
                                <i class="fa fa-long-arrow-down analy-trend-dowm" ng-if="card.like_rate < 0"></i> -->
                                {{(card.like_rate * 100).toFixed(2)}}% </span>
                        <span class="text-danger" ng-if="!card.like_rate">Not Enough Data</span>
                    </p>
                </div>
            </div>
            <div class="info-device" ng-if="card.devicePieCharts">
                <div class="device-chart device-wrapper">
                    <div class="charts-wrapper">
                        <highchart class="charts-dev" config="card.devicePieCharts"></highchart>
                    </div>
                </div>
                <div class="device-data device-wrapper">
                    <div class="device-pc-wrapper data-wrapper">
                        <i class="fa fa-tv device-icon ads-font-22"></i>
                        <span class="device-num">{{((card.pc_impression_rate ? card.pc_impression_rate : 0) * 100).toFixed(1)}}%</span>
                    </div>
                    <div class="device-mobile-wrapper data-wrapper">
                        <i class="fa fa-mobile device-icon ads-font-28"></i><span class="device-num">{{(100 - (card.pc_impression_rate? card.pc_impression_rate : 0) * 100).toFixed(1)}}%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="analysis-title ads-font-20">Advertisement Trending:</div>
    <div class="row analy-charts analy-trending">
        <!--charts line-->
        <div class="col-md-6 charts-left">
            <p class="charts-title">Impression Trending: </p>
            <p class="charts-subtitle"></p>
            <div class="charts-wrapper" ng-if="card.impressionCharts">
                <highchart class="charts-line" config="card.impressionCharts"></highchart>
            </div>
            <div ng-if="!card.impressionCharts" class="analy-nodata">
                <img src="/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a ng-href="../extension" target="_blank"><i class="fa fa-download analy-down-icon"></i>Download BIGBIGADS Extension</a></p>
            </div>
        </div>
        <div class="col-md-6">
            <p class="charts-title">Engagement Trending:</p>
            <p class="charts-subtitle"></p>
            <div class="charts-wrapper" ng-if="card.engagementsCharts">
                <highchart class="charts-line" config="card.engagementsCharts"></highchart>
            </div>
            <div class="analy-nodata" ng-if="!card.engagementsCharts">
                <img src="/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a ng-href="../extension" target="_blank"><i class="fa fa-download analy-down-icon"></i>Download BIGBIGADS Extension</a></p>
            </div>
        </div>
    </div>
    <div class="analysis-title ads-font-20">Audience &amp; Interest:</div>
    <div class="row analy-charts analy-audience">
        <div class="col-md-6">
            <p class="charts-title">Demography:</p>
            <!--char pie bar -->
            <div class="audience-wrapper">
                <div ng-class="{'audience-charts' : card.whyseeads.limit}">
                    <div class="col-md-6 charts-wrapper" ng-if="card.whyseeads.gender && card.whyseeads.age">
                        <highchart class="charts-pie" config="card.genderPieCharts"></highchart>
                    </div>
                    <div class="col-md-6 charts-wrapper" ng-if="card.whyseeads.gender && card.whyseeads.age">
                        <highchart class="charts-bar" config="card.ageBarCharts"></highchart>
                    </div>
                </div>
                <a href="./plans" ng-if = "card.whyseeads.limit" target="_blank">
                    <div class="analy-upgrade ads-font-26 ads-weight-600" >
                        you need to Upgrade
                    </div>
                </a>
            </div>
                <div ng-if="!card.whyseeads.gender || !card.whyseeads.age" class="analy-nodata">
                    <img src="/images/analysis/bg_nodata.png" alt="">
                    <br>
                    <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                    <p><a ng-href="../extension" target="_blank"><i class="fa fa-download analy-down-icon"></i>Download BIGBIGADS Extension</a></p>
                </div>

        </div>
        <!--interests-->
        <div class="col-md-6">
            <P class="charts-title">Interest:</P>
            <!-- <p class="charts-subtitle">&nbsp;</p> -->
            <div class="analy-interst" ng-if="card.whyseeads.interests" ng-init="interstPageNum = 1">
                <div class="interest-wrapper">
                    <div class="stat-wrapper" ng-repeat="interstItem in card.interestsArr | limitTo:(interstPageNum * 6)" ng-if="$index+1 > (interstPageNum * 6 - 6)">
                        <i class="fa fa-bookmark-o ads-font-18 stat-icon"></i>
                        <div class="stat-name" ng-if="(card.interestsArr.limit? $index < card.interestsArr.limit : true)">
                            <span title="{{interstItem.name}}">{{interstItem.name}}</span>
                        </div>
                        <div class="stat-name" ng-if="(card.interestsArr.limit? $index >= card.interestsArr.limit : false)">
                            <span title="Upgrade"><a href="./plans" target="_blank">Upgrade</a></span>
                        </div>
                        <div class="progress stat-progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" ng-style="{'width': ((interstItem.value / card.interestsArr.count) * 100) + '%'}">
                            </div>
                        </div>
                        <div class="stat-number">{{((interstItem.value / card.interestsArr.count) * 100).toFixed(2)}}%</div>
                        <div ng-if= "interstItem.limit" class="">
                            If you want see more you need to <a href="./plans" target="_blank">Upgrade</a>
                        </div>
                    </div>
                </div>
                <div class="text-right interest-footer">
                    <span class="page-num"> {{interstPageNum}} / {{ ceil(card.interestsArr.length / 6)}}</span>
                    <button class="fa fa-caret-left turnpage-button" ng-disabled="interstPageNum == 1" ng-click="interstPageNum = interstPageNum - 1"></button>
                    <button class="fa fa-caret-right turnpage-button" ng-disabled="interstPageNum == ceil(card.interestsArr.length / 6)" ng-click="interstPageNum = interstPageNum + 1"></button>
                </div>
            </div>
            <div ng-if="!card.whyseeads.interests" class="analy-nodata">
                <img src="/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a ng-href="../extension" target="_blank"><i class="fa fa-download analy-down-icon"></i>Download BIGBIGADS Extension</a></p>
            </div>
        </div>
    </div>
    <div class="analysis-title ads-font-20">Country Rank by Impressions Share:</div>
    <div class="row analy-charts analy-share">
        <div class="col-md-12 ">
            <p class="charts-title">Top countries by Impression:</p>
            <p class="charts-subtitle"></p>
            <!--charts map-->
            <div class="analy-shar-wrapper clearfix" ng-if="card.addrMapCharts">
                <div class="col-md-6">
                    <div class="charts-wrapper adsmapchart-wrapper" style="padding: 0;min-height: 350px">
                        <highchart class="charts-adsmap" config="card.addrMapCharts" ng-class="{'ads-filder-blur' : card.addrMapLimit}"></highchart>
                        <a href="./plans" ng-if="card.addrMapLimit" target="_blank">
                            <div class="analy-upgrade ads-font-26 ads-weight-600">
                                You need to Upgrade
                            </div>
                        </a>
                    </div>
                </div>
                <div class="col-md-6 analy-table">
                    <!--country table-->
                    <div class="analy-map-table">
                        <div class="map-table-wrappe">
                            <table class="table table-striped analy-adstable " ng-init="tabelePageNum = 1">
                                <thead>
                                    <tr class="ads-font-16 ads-weight-bold text-left">
                                        <td></td>
                                        <td>Country</td>
                                        <td>Share</td>
                                        <td></td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="adsItems in card.whyseeads.addr | limitTo:(tabelePageNum * 7)" ng-if="$index+1 > (tabelePageNum * 7 - 7)">
                                        <td class="analy-td1">{{$index + 1}}</td>
                                        <td class="analy-td2">
                                            <div class="country-name ads-text-ellipsis" title="{{adsItems.name}}" ng-if="(card.countryArr.limit ? $index < card.countryArr.limit : true)">
                                                {{adsItems.name}}
                                            </div>
                                            <div class="country-name ads-text-ellipsis" title="Upgrade" ng-if="(card.countryArr.limit ? $index >= card.countryArr.limit : false)">
                                                <a href="./plans" target="_blank">Upgrade</a>
                                            </div>
                                        </td>
                                        <td class="analy-td3">
                                            <div class="percent-number">{{((adsItems.value / card.countryArr.count) * 100).toFixed(2)}} %</div>
                                        </td>
                                        <td class="analy-td4">
                                            <div class="progress-wrapper">
                                                <div class="progress">
                                                    <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" ng-style="{'width':((adsItems.value / card.countryArr.count) * 100) + '%'}">
                                                        <span class="sr-only">{{((adsItems.value / card.countryArr.count) * 100).toFixed(2)}} % Complete</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                        <div class="map-table-footer text-right">
                            <span class="page-num"> {{tabelePageNum}} / {{ ceil(card.countryArr.length / 7)}}</span>
                            <button class="fa fa-caret-left turnpage-button" ng-disabled="tabelePageNum == 1" ng-click="tabelePageNum = tabelePageNum - 1"></button>
                            <button class="fa fa-caret-right turnpage-button" ng-disabled="tabelePageNum == ceil(card.countryArr.length / 7)" ng-click="tabelePageNum = tabelePageNum + 1"></button>
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="!card.addrMapCharts" class="analy-nodata">
                <img src="/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a ng-href="../extension" target="_blank"><i class="fa fa-download analy-down-icon"></i>Download BIGBIGADS Extension</a></p>
            </div>
        </div>
    </div>
</div>
