<div ng-controller="AdAnalysisController" id="ad-analysis" class="ad-analysis container alert ">
    <div class="ads-font-20 analysis-title">Advertisement Overview:</div>
    <div class="analy-overview row" overview-Scroll >
        <div class="col-sm-6 analy-adscard">
            <div class="adscard-body">
                <div class="adscard-header">
                    <a ng-href="https://www.facebook.com/{{card.adser_username}}" target="_blank">
                        <img src="{{settings.imgRemoteBase[0] + card.small_photo}}" alt="" class="card-adserhead">
                    </a>
                    <div class="card-adsername-div">
                        <p class="ads-font-16 ads-weight-bold ads-text-ellipsis card-adsername">
                            <a class="" ui-sref="adser({name:card.adser_name, adser:card.adser_username})" target="_blank">
                                <span ng-bind-html="card.adser_name | toHtml" ng-show="card.adser_name"></span>
                                <span ng-show="!card.adser_name">{{card.adser_username}}</span>
                            </a>
                        </p>
                        <p class="card-time ads-font-14">
                            Sponsored
                        </p>
                    </div>
                </div>
                <div class="adscard-card">
                    <single-image ng-if="card.type == 'SingleImage'" card="card">
                    </single-image>
                    <single-video ng-if="card.type == 'SingleVideo'" card="card"></single-video>
                    <carousel ng-if="card.type == 'Carousel'" card="card">
                    </carousel>
                    <adcanvas ng-if="card.type == 'Canvas'" card="card"></adcanvas>
                </div>
                <div class="adscard-footer">
                    <i class="analy-fbicon icon-good"></i>
                    <i class="analy-fbicon icon-love"></i>
                    <i class="analy-fbicon icon-surp"></i>
                    <span ng-if="card.likes" class="ads-font-14 adscard-likedata">{{card.likes | addUnit}}</span>
                    <span class="text-right adscard-comments ads-font-14">
                        <span class="comments-text" >{{card.comments | addUnit}}&nbsp;Comments</span>
                    <span class="comments-text">{{card.shares | addUnit}}&nbsp;Shares</span>
                    <span class="comments-text">{{card.views | addUnit}}&nbsp;Views</span>
                    </span>
                </div>
                <br>
            </div>

        </div>
        <div class="col-sm-6 analy-info ads-font-16"  ng-class="{'info-position' : infoPosition, 'info-fixed': !infoPosition}">
            <div class="analy-info-wrapper">
                <p>
                    <span class="ads-weight-bold">Time:</span>
                    <span>{{card.first_see}}~{{card.last_see}}</span>
                </p>
                <p>
                    <a ng-href="https://www.facebook.com/{{id}}" class="btn btn-primary" target="_blank">See Original Post</a>
                </p>
                <p>
                    <span class="ads-weight-bold">Ad placement: </span>
                    <span>{{card.show_way | adsTypes}}</span></p>
                <p>
                    <span class="ads-weight-bold">Objective 
                        <span class="ads-label-beta">BETA</span>:
                    </span>
                    <span ng-if="card.objective">{{card.objective}}</span>
                    <span ng-if="!card.objective" class="text-danger">No Data 
                    <a href="" > <i class="glyphicon glyphicon-download"></i> BIGBIGADS Extension</a>
                    </span>
                </p>
                <p>
                    <span class="ads-weight-bold">Landing page:</span>
                    <a href="{{card.dest_site}}" class="btn btn-primary" ng-if="card.dest_site">Link</a>
                    <span class="text-danger" ng-if="!card.dest_site">No Data
                    <a href="" ><i class="glyphicon glyphicon-download"></i> BIGBIGADS Extension</a></span></p>
                <p> <a ng-href="plans">Upgrade your account to see all ads of this advertiser</a></p>
            </div>
            <div id="analy-info-mark" style="height: 0px"></div>
        </div>
       
    </div>
    <hr>
    <div class="analysis-title ads-font-20">Advertisement Trending：</div>
    <div class="row analy-charts analy-trending">
        <!--charts line-->
        <div class="col-md-6 charts-left">
            <p class="charts-title">Impression Trending: </p>
            <p class="charts-subtitle">Last 30 days VS. previous period</p>
            <div class="charts-wrapper" ng-if="card.impression">
                <highchart class="charts-line" config="impressionCharts"></highchart>
            </div>
            <div ng-if="!card.impression" class="analy-nodata">
                <img src="../static/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a href="">Download BIGBIGADS Extension</a></p>
            </div>
        </div>
        <div class="col-md-6">
            <p class="charts-title">Engagement Trending: </p>
            <p class="charts-subtitle">Last 30 days VS. previous period</p>
            <div class="charts-wrapper" ng-if="card.engagements_trend">
                <highchart class="charts-line" config="engagementsCharts"></highchart>
            </div>
            <div class="analy-nodata" ng-if="!card.engagements_trend">
                <img src="../static/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a href="">Download BIGBIGADS Extension</a></p>
            </div>
        </div>
    </div>
    <div class="analysis-title ads-font-20">Audience &amp; Interest：</div>
    <div class="row analy-charts analy-audience">
        <div class="col-md-6">
            <div class="col-md-12">
                <p class="charts-title">Demography:</p>
                <p class="charts-subtitle">Last 30 days VS. previous period</p>
            </div>
            <!--char pie bar -->
            <div class="col-md-6 charts-wrapper" ng-if="card.whyseeads.gender && card.whyseeads.age">
                <highchart class="charts-pie" config="adsGenderCharts"></highchart>
            </div>
            <div class="col-md-6 charts-wrapper" ng-if="card.whyseeads.gender && card.whyseeads.age">
                <highchart class="charts-bar" config="adsAgeCharts"></highchart>
            </div>
            <div ng-if="!card.whyseeads.gender || !card.whyseeads.age" class="analy-nodata">
                <img src="../static/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a href="">Download BIGBIGADS Extension</a></p>
            </div>
        </div>
        <!--interests-->
        <div class="col-md-6">
            <P class="charts-title">Interest:</P>
            <p class="charts-subtitle">&nbsp;</p>
            <div class="analy-interst" ng-if="card.whyseeads.interests" ng-init="interstPageNum = 1">
                <div class="interest-wrapper">
                    <div class="stat-wrapper" ng-repeat="interstItem in interestsArr | limitTo:(interstPageNum * 6)" ng-if="$index+1 > (interstPageNum * 6 - 6)">
                        <i class="fa fa-bookmark-o ads-font-18 stat-icon"></i>
                        <div class="stat-name">
                            <span ng-if="$index <5 "  title="{{interstItem.name}}">{{interstItem.name}}</span>
                            <span ng-if="$index >= 5"><a ng-href="plans">Upgrade</a></span>
                        </div>
                        <div class="progress stat-progress">
                            <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: {{(interstItem.value / interestsArr.count) * 100}}%;">
                            </div>
                        </div>
                        <div class="stat-number">{{((interstItem.value / interestsArr.count) * 100).toFixed(2)}}%</div>
                    </div>
                </div>
                <div class="text-right interest-footer">
                    <span class="page-num"> {{interstPageNum}} / {{ ceil(interestsArr.length / 6)}}</span>
                    <button class="fa fa-caret-left turnpage-button" ng-disabled="interstPageNum == 1" ng-click="interstPageNum = interstPageNum - 1"></button>
                    <button class="fa fa-caret-right turnpage-button" ng-disabled="interstPageNum == ceil(interestsArr.length / 6)" ng-click="interstPageNum = interstPageNum + 1"></button>
                </div>
            </div>
            <div ng-if="!card.whyseeads.interests" class="analy-nodata">
                <img src="../static/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a href="">Download BIGBIGADS Extension</a></p>
            </div>
        </div>
    </div>
    <div class="analysis-title ads-font-20">Country Rank by Impressions Share:</div>
    <div class="row analy-charts analy-share">
        <div class="col-md-12 ">
            <p class="charts-title">Top countries by impression:</p>
            <p class="charts-subtitle">Sessions over the last 30 days</p>
            <!--charts map-->
            <div class="analy-shar-wrapper clearfix" ng-if="card.whyseeads.addr">
                <div class="col-md-6">
                    <div class="charts-wrapper" style="padding: 0;min-height: 350px">

                        <highchart class="charts-adsmap" config="adsMapChart"></highchart>
                    </div>
                </div>
                <div class="col-md-6 analy-table">
                    <!--country table-->
                    <div class="analy-map-table">
                        <div class="map-table-wrappe">
                            <table class="table table-striped analy-adstable " ng-init="tabelePageNum = 1">
                                <thead>
                                    <tr class="ads-font-16 ads-weight-bold text-left">
                                        <td></td>
                                        <td>Country</td>
                                        <td>Traffic Share</td>
                                        <td></td>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="adsItems in adsVisitCountryData | limitTo:(tabelePageNum * 7)" ng-if="$index+1 > (tabelePageNum * 7 - 7)">
                                        <td class="analy-td1">{{$index + 1}}</td>
                                        <td class="analy-td2">
                                            <div class="country-name ads-text-ellipsis" ng-if="$index < 6">{{adsItems.name}}</div>
                                            <div class="country-name ads-text-ellipsis" ng-if="$index >= 6"><a ng-href="plans">Upgrade</a></div>
                                        </td>
                                        <td class="analy-td3">
                                            <div class="percent-number">{{((adsItems.value / adsVisitCountryCount) * 100).toFixed(2)}} %</div>
                                        </td>
                                        <td class="analy-td4">
                                            <div class="progress-wrapper">
                                                <div class="progress">
                                                    <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:{{((adsItems.value / adsVisitCountryCount) * 100)}}%;">
                                                        <span class="sr-only">{{((adsItems.value / adsVisitCountryCount) * 100).toFixed(2)}} % Complete</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="map-table-footer text-right">               
                            <span class="page-num"> {{tabelePageNum}} / {{ ceil(adsVisitCountryData.length / 7)}}</span>
                            <button class="fa fa-caret-left turnpage-button" ng-disabled="tabelePageNum == 1" ng-click="tabelePageNum = tabelePageNum - 1"></button>
                            <button class="fa fa-caret-right turnpage-button" ng-disabled="tabelePageNum == ceil(adsVisitCountryData.length / 7)" ng-click="tabelePageNum = tabelePageNum + 1"></button>               
                        </div>
                    </div>
                </div>
            </div>
            <div ng-if="!card.whyseeads.addr" class="analy-nodata">
                <img src="../static/images/analysis/bg_nodata.png" alt="">
                <br>
                <span class="ads-font-26 ads-weight-600 text-danger">Not Enough Data</span>
                <p><a href="">Download BIGBIGADS Extension</a></p>
            </div>
        </div>
    </div>
</div>